<h1 id="changelog">Changelog</h1>
<p>All notable changes to PSD solver will be documented in this file.</p>
<h2 id="rolling-release-2.2">Rolling Release (2.2)</h2>
<h3 id="added">Added</h3>
<h3 id="changed">Changed</h3>
<ul>
<li>Moved to GitLab for hosting the repository.</li>
</ul>
<h3 id="removed">Removed</h3>
<h2 id="section"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v2.1">2.1</a> - 2021-01-27</h2>
<h3 id="added-1">Added</h3>
<ul>
<li>New accurate force calculations via matrix-vector product: new flag <code>-getreactionforce</code>.</li>
<li>New flag <code>-reactionforce</code> variational-based | stress-based to get reaction force on a surface.</li>
<li>New flag <code>-plotreactionforce</code> to activate real time pipe plotting using GnuPlot.</li>
<li>More verbos info on <code>-help</code></li>
<li>New flag <code>-mesh</code> to provide the name of mesh to <code>PSD_Solve</code>.</li>
<li>New flag <code>-probe</code> to postprocess FE variables at a point.</li>
<li>New flag <code>-crackdirichletcondition</code> to include a pre-cracked Dirichlet in damage models.</li>
<li>New tests for more advance top-ii-vol partitioning.</li>
<li>New flag <code>-constrainHPF</code> to enable constrain conditions in hybrid phase-field (WIP).</li>
<li>New developments in parallel interpolations.</li>
<li>Tutorials added, use <code>make tutorials</code> to install</li>
</ul>
<h3 id="changed-1">Changed</h3>
<ul>
<li>Moved to FreeFEM 4.7-1.</li>
<li>Moved to PETSc 3.14.</li>
<li>New version of top-ii-vol v 1.3 support for exascale computing (includes new 2D 3D partitioning)</li>
<li><code>-fastmethod</code> now replaced by <code>-withmaterialtensor</code> (this is now inverse of <code>-fastmethod</code>)</li>
</ul>
<h3 id="removed-1">Removed</h3>
<ul>
<li>Flag <code>-pipegnu</code> not supported for damage mechanics (to be further deprecated from elsto/soildynamics)</li>
</ul>
<h3 id="bugs-removed">Bugs removed</h3>
<ul>
<li>Stain vector inccorect numbering in split fuction of GFP</li>
</ul>
<p>( see hash <a href="https://codev-tuleap.intra.cea.fr/plugins/git/hpcseism/freefem?a=commit&amp;h=5ec7b882494f71984d07f468b518ec886e942d32">5ec7b882494f71984d07f468b518ec886e942d32</a>)</p>
<ul>
<li>Hybrid phase-field with constrain with wrong update</li>
</ul>
<p>(see has <a href="https://codev-tuleap.intra.cea.fr/plugins/git/hpcseism/freefem?a=commit&amp;h=20ebfbc3cc58b9f1407658543bf3b239e74bd089">20ebfbc3cc58b9f1407658543bf3b239e74bd089</a>)</p>
<h2 id="section-1"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v2.0">2.0</a> - 2020-08-18</h2>
<h3 id="added-2">Added</h3>
<ul>
<li>New processing via C++, <code>PSD_PreProcess</code> binary (MAJOR CHANGE).</li>
<li>New solving via shell wrapper <code>PSD_Solve</code> instead of <code>FreeFem++</code> or <code>FreeFem++-mpi</code>.</li>
<li>New examples of using the solver.</li>
<li>New Pdf documentation containing tutorials, function definitions, verbos on PSD C++ library.</li>
<li>New option <code>-nonlinearmethod</code> (Picard|Newton-Raphsons).</li>
<li>New time discretization option <code>-timediscretization</code>.</li>
<li>New point boundary conditions.</li>
<li>New dummy city mesh and analysis 2D for soil dynamics.</li>
<li>Automatic identification of FreeFEM and Gmsh during <code>./configure</code>.</li>
<li>New flags for <code>--with-FreeFEM=</code> and <code>--with-Gmsh=</code> during <code>./configure</code>.</li>
<li>New flag <code>-bodyforceconditions</code> [int] to include body force.</li>
<li>New flag <code>-problem</code> linear-elasticity | damage | elastodynamics | soildynamics to define physics.</li>
<li>New flag <code>-model</code> to set approximation for damage mechanics hybrid-phase-field | Mazar | pseudo-nonlinear | Hujeux.</li>
<li>Better energy splitting included Hybrid phase-field compressibility vs tensile energy condition.</li>
<li>Introduce boundary conditions via <code>-dirichletconditions</code> [int] flag.</li>
<li>Introduce point boundary conditions via <code>-dirichletpointcondition</code> [int] flag.</li>
<li>Introduce traction boundary conditions via <code>-tractionconditions</code> [int] flag.</li>
<li>New folder <code>tests</code> containing unit-tests for modules.</li>
<li>New Hujeux law (nonlinear soil law) interface using C++ class (Thanks to Evelyne Foerster).</li>
<li>New pseudo-nonlinear model for solving elastodynamics and soildynamics with nonlinear Newton-Raphsons.</li>
<li>Introduced double couple earthquake source boundary condition for soildynamics.</li>
<li>New flag <code>-doublecouple</code> force-based | displacement-based to use double couple source for soildynamics.</li>
<li>New top-ii-vol parallel meshing via <code>-top2vol-meshing</code> flag (compatible with soildynamics).</li>
</ul>
<h3 id="changed-2">Changed</h3>
<ul>
<li>Moved to FreeFEM 4.6.</li>
<li>Moved to PETSc 13.13.</li>
<li>Moved to C++ for preprocessing.</li>
<li>Moved to shell wrapper PSD_Solve for solving.</li>
<li>Changes to GFP energydecopostion plugin 'DecompEnergy_Op', now includes compressibility history.</li>
<li>Replaced GFPDecompEnergy2D/GFPDecompEnergy3D by a generic 2D/3D function GFPSplitEnergy(Eps1[],PsiPlus[],PsiMinus[],HistPlus[],HistMinus[],par);.</li>
<li>Postprocessing flag <code>-postprocess</code> options now support <code>u</code> , <code>v</code>, <code>a</code> , <code>uv</code>, <code>ua</code>, <code>av</code> or <code>uav</code>.</li>
</ul>
<h3 id="removed-2">Removed</h3>
<ul>
<li>No more <code>FFINSTALLDIR</code> and <code>GMSH</code> variables during <code>make</code> and <code>make check</code>.</li>
<li>No more <code>-plot</code> flag now handled by <code>-postprocess</code>.</li>
<li>No more <code>-nonlinear</code> flag now handled by <code>-problem</code> and <code>-model</code>.</li>
<li>No more <code>-bodyforce</code> flag now handled by an <code>int</code> valued <code>-bodyforceconditions</code>.</li>
<li>No more <code>-dynamic</code> flag now handled by <code>-problem</code> and <code>-model</code>.</li>
<li>No more <code>-soildynamic</code> flag now handled by <code>-problem</code> and <code>-model</code>.</li>
<li>No more <code>-quasistatic</code> flag now handled by <code>-problem</code> and <code>-model</code>.</li>
<li>No more <code>-dirichletbc</code> flag now handled by <code>-dirichletconditions</code>.</li>
</ul>
<h3 id="bugs-removed-1">Bugs removed</h3>
<ul>
<li>Bug in 3D paraxial loading (see hash <a href="https://codev-tuleap.intra.cea.fr/plugins/git/hpcseism/freefem?a=blobdiff&amp;h=f23846d41b3eee27b9f2c3b852b9c5e2f90080c5&amp;hp=0af4cfcc1355b98cc09a94e42c8ec521c6c0bb00&amp;hb=8fcbe7390e526423cd24b5f0ab1c06899b36c67f&amp;f=src%2Fpsd-preprocessor%2FMacros.hpp">8fcbe7390e526423cd24b5f0ab1c06899b36c67f</a>)</li>
</ul>
<h2 id="section-2"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.8">1.8</a> - 2020-01-21</h2>
<h3 id="added-3">Added</h3>
<ul>
<li>New soil dynamic module <code>-soildynamics</code></li>
<li>New paraxial element support in 2D.</li>
<li>New timeplotting support <code>-timepvd</code></li>
<li>New <code>-postprocess</code> option for postprocessing <code>u</code> , <code>v</code>, <code>a</code> , or <code>uav</code>.</li>
</ul>
<h3 id="changed-3">Changed</h3>
<ul>
<li>Moved to FreeFEM 4.4.2.</li>
<li>Moved to PETSc 13.12.</li>
<li>New simpler way of plotting <code>savevtk</code> in parallel with <code>append</code> flag for iterative solutions.</li>
<li>VTU files get stored with a date and time stamp.</li>
<li>New way of maintaining a logfile for all simulations (date,time,case,..) in <code>simulation-log.csv</code>.</li>
</ul>
<h2 id="section-3"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.7">1.7</a> - 2019-11-08</h2>
<h3 id="added-4">Added</h3>
<ul>
<li>New mesh reordering via Reverse Cuthill-Mackee via <code>-useRCM</code>.</li>
<li>New quasi-static parallel solver (Extension of B.Masseron &amp; G.Rastiello sequential version).</li>
<li>New GFP plugin for Mazar's damage update for 2D/3D problems <code>GFPMazarsDamageUpdate(...)</code>.</li>
<li>New MPI plotting routine <code>plotJustMeshMPI()</code>.</li>
<li>New option <code>-fastmethod</code> to switch back to default variational formulation.</li>
<li>New make flag for compiling on supercomputer.</li>
</ul>
<h3 id="changed-4">Changed</h3>
<ul>
<li>Changed variational formulation now using <span class="math"><em>ε</em>(<em>u</em>) : <em>A</em> : <em>ε</em>(<em>v</em>)</span>.</li>
<li>Using GFP becomes optional <code>-useGFP</code>.</li>
<li>Better documentation via <code>.md</code> and <code>.html</code> files.</li>
<li>Better plotting support for <code>PlotMPI()</code>.</li>
<li>Moved to FreeFEM 4.4.</li>
</ul>
<h2 id="section-4"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.6">1.6</a> - 2019-06-11</h2>
<h3 id="added-5">Added</h3>
<ul>
<li>Dynamic linear solver in 2D and 3D parallel/sequential.</li>
<li>New finite element variable for partition of unity-- for fixing integrals.</li>
</ul>
<h3 id="changed-5">Changed</h3>
<ul>
<li>Better documentation via <code>.md</code> and <code>.html</code> files.</li>
<li>Correct quadrature order for faster computations.</li>
<li>Major changes/splitting of <code>.script</code> files.</li>
</ul>
<h3 id="removed-3">Removed</h3>
<ul>
<li>Removed the <code>BoundaryAndSourceConditions.script</code> merged with <code>ControlParameters.script</code>.</li>
</ul>
<h3 id="bugs">Bugs</h3>
<ul>
<li>Bug in integrals fixed.</li>
</ul>
<h2 id="section-5"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.5">1.5</a> - 2019-05-29</h2>
<h3 id="added-6">Added</h3>
<ul>
<li>Dynamic linear solver in 2D and 3D sequential.</li>
<li>New meshes for dynamics tests <code>bar-dynamic.msh</code>.</li>
<li>Checking modules <code>make check</code>.</li>
<li>Faster sparsity pattern calculations.</li>
</ul>
<h3 id="changed-6">Changed</h3>
<ul>
<li>Better documentation via <code>.md</code> and <code>.html</code> files.</li>
<li>Major restructuring of the codes.</li>
<li>Moved to <code>automake</code> for solver installation.</li>
<li>Mesh building via <code>make</code>.</li>
</ul>
<h3 id="removed-4">Removed</h3>
<ul>
<li>Removed the manufactured solution codes.</li>
</ul>
<h2 id="section-6"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.4">1.4</a> - 2019-05-14</h2>
<h3 id="added-7">Added</h3>
<ul>
<li>Fully vectorial finite element solver for phase-filed <code>-vectorial</code>.</li>
<li>New <code>-supercomp</code> for avoiding xterm issues on super computers.</li>
<li>New <code>MatViz()</code> function for matrix sparsity visualization.</li>
<li>Introduced <code>GFP</code> plugin support (Go Fast Plugins).</li>
</ul>
<h3 id="changed-7">Changed</h3>
<ul>
<li>Elastic energy decomposition is now optional <code>-energydecomp</code>.</li>
<li>Force calculation using integrals (Thanks to G.Rastiello).</li>
</ul>
<h2 id="section-7"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.3">1.3</a> - 2019-04-08</h2>
<h3 id="added-8">Added</h3>
<ul>
<li>New meshes in 2D/3D<code>Notched-plate</code> , <code>square-crack</code>, etc.</li>
<li>New fracture mechanics module.</li>
<li>New <code>-nonlinear</code> flag to activate phase-field model for brittle fracture.</li>
<li>New <code>-timelog</code> for time logging the solver.</li>
<li>New <code>-pipegnu</code> for GNUplot piping.</li>
</ul>
<h3 id="changed-8">Changed</h3>
<ul>
<li>Scripting now performed using <code>.script</code> files:
<ul>
<li><code>BoundaryAndSourceConditions.script</code></li>
<li><code>LinearFormBuilderAndSolver.script</code></li>
<li><code>Macros.script</code></li>
<li><code>Main.script</code></li>
<li><code>VariationalFormulation.script</code></li>
<li>....</li>
</ul></li>
<li>Move to FreeFEM version 4.0.</li>
<li>Move to PETSc version 3.11.</li>
</ul>
<h2 id="section-8"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.1">1.2</a> - 2019-03-18</h2>
<h3 id="added-9">Added</h3>
<ul>
<li>Support for Gmsh's <code>.msh</code> or Medit's <code>.mesh</code> meshes in folder <code>Meshes</code>.</li>
<li>Advance to 3D physics.</li>
<li>New MPI based parallel solver linear elasticity.</li>
<li>New approach for solver generation via scripting (PhD thesis MA Badri) with <code>scriptGenerator.edp</code>.</li>
<li>Integrated Domain decomposition macro (PhD thesis MA Badri).</li>
<li>Customized <code>.vtk</code> support for ParaView post-processing.</li>
<li>New point boundary condition macro <code>pointbc(Real[int], fespace, matrix)</code>.</li>
<li>New flags for communicating with the solver: <code>-dimension</code>, <code>-plot</code>, <code>-bodyforce</code>, <code>-lagrange</code>, etc.</li>
</ul>
<h3 id="changed-9">Changed</h3>
<ul>
<li>More advance README.MD.</li>
<li>Sequential solver now merged within scripting via flag <code>-sequential</code>.</li>
<li>Move to FreeFEM version 3.62.</li>
<li>Moved manufactured solutions to <code>validation-test</code> folder.</li>
</ul>
<h2 id="section-9"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.1">1.1</a> - 2019-03-04</h2>
<h3 id="added-10">Added</h3>
<ul>
<li>Initial FreeFEM files for sequential linear elasticity in 2D (case of constrained bar).</li>
<li>More cases of manufactured solution for linear elasticity in 2D.</li>
<li>Added README.MD for explaining the solver.</li>
<li>ParaView plotting activated.</li>
</ul>
<h3 id="changed-10">Changed</h3>
<ul>
<li>Moved to Tuleap git hosting from CEA.</li>
<li>Separate folder of manufactured solutions and the linear elastic solver.</li>
<li>Move to FreeFEM version 3.61.</li>
</ul>
<h2 id="section-10"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.0">1.0</a> - 2019-02-15</h2>
<h3 id="added-11">Added</h3>
<ul>
<li>Initial FreeFEM files Method of manufactured solution for linear elasticity in 2D.</li>
</ul>
<h2 id="version-git-tags">Version git tags</h2>
<table>
<thead>
<tr class="header">
<th align="left">Version</th>
<th align="left">Git tag</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.0">1.0</a></td>
<td align="left">8a8ecb2746b7da792073358c60df33bae647f788</td>
</tr>
<tr class="even">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.1">1.1</a></td>
<td align="left">a667e6085ba1f92f8dd619bd40e18f85c593bc0a</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.2">1.2</a></td>
<td align="left">e48b7b3a30c05ad4c343efa6a17fee386031f437</td>
</tr>
<tr class="even">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.3">1.3</a></td>
<td align="left">39f4324550365849852c5264b8d4535aae05e30d</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.4">1.4</a></td>
<td align="left">f51f678630eb9b2fed355e5cedf976ce8b5fa341</td>
</tr>
<tr class="even">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.5">1.5</a></td>
<td align="left">07293ba09a69d3d6a16278220a0b4a7a9f318f96</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.6">1.6</a></td>
<td align="left">f359dd049fb1ddde376e8ad8e5177c663e430418</td>
</tr>
<tr class="even">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.7">1.7</a></td>
<td align="left">aee9bfec868a70b3d9974d7692bc19f9739ab7dc</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v1.8">1.8</a></td>
<td align="left">2f26292636c7248133e31ae912ee58113de2ef71</td>
</tr>
<tr class="even">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v2.0">2.0</a></td>
<td align="left">1e1a4d7f10df30d106b52eba1c5caf69e8bc0f36</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://gitlab.com/PsdSolver/psd_sources/-/tree/v2.1">2.1</a></td>
<td align="left">8b9d84f25aedbd684eb0f06cdd4ffbbf9a60a0e2</td>
</tr>
</tbody>
</table>
